@page "/"

@using GoogleMapsComponents
@using GoogleMapsComponents.Maps
@using System.Threading.Tasks;
@using System;
@using System.Globalization;
@using System.Text;
@using System.Threading;

<h1>Google Map</h1>

@*<GoogleMap @ref="@map1" Id="map1" Options="@mapOptions" OnAfterInit="@OnAfterInitAsync"></GoogleMap>

<p>
    @myEvent
</p>*@



@code {

    @*private GoogleMap map1;
    private MapOptions mapOptions;

    private string myLatLong = string.Empty;
    private string myEvent = string.Empty;

    protected override void OnInitialized()
    {
        mapOptions = new MapOptions()
        {
            Zoom = 13,
            Center = new LatLngLiteral()
            {
                Lat = 52.515778,
                Lng = 14.112908
            },
            MapTypeId = MapTypeId.Roadmap
        };
    }

    private async Task OnAfterInitAsync()
    {
        await map1.InteropObject.AddListener<MouseEvent>("click", async (e) => await OnClick(e));
        await map1.InteropObject.AddListener<MouseEvent>("dblclick", async (e) => await OnDoubleClick(e));
    }

    private async Task OnClick(MouseEvent e)
    {
        // Change the localization to covert comma to dot
        System.Threading.Thread.CurrentThread.CurrentCulture = System.Globalization.CultureInfo.GetCultureInfo("en-US");
        myLatLong = e.LatLng.ToString();
        myEvent = "Clicked on:" + myLatLong;

        StateHasChanged();
    }

    private async Task OnDoubleClick(MouseEvent e)
    {
        myLatLong = e.LatLng.ToString();
        myEvent = "Double Clicked on:" + myLatLong;

        StateHasChanged();
    }
*@
}